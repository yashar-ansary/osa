---

debug: false
install_method: source

openstack_domain: "local.cloud"
dhcp_domain: "home.local.cloud"
service_region: "Tehran"

openstack_host_specific_kernel_modules:
  - name: "openvswitch"
    pattern: "CONFIG_OPENVSWITCH"

neutron_plugin_type: ml2.ovs
neutron_ml2_drivers_type: "flat,vlan,vxlan"

neutron_provider_networks:
  network_flat_networks: "*"
  network_types: "vxlan"
  network_vxlan_ranges: "1:1000"
  network_mappings: "flat:br-provider"

  
proxy_env_url: http://192.168.210.60:8080
no_proxy_env: "localhost,127.0.0.1,{{ internal_lb_vip_address }},{{ external_lb_vip_address }},{% for host in groups['all_containers'] %}{{ hostvars[host]['container_address'] }}{% if not loop.last %},{% endif %}{% endfor %}"
global_environment_variables:
   HTTP_PROXY: "{{ proxy_env_url }}"
   HTTPS_PROXY: "{{ proxy_env_url }}"
   NO_PROXY: "{{ no_proxy_env }}"
   http_proxy: "{{ proxy_env_url }}"
   https_proxy: "{{ proxy_env_url }}"
   no_proxy: "{{ no_proxy_env }}"

haproxy_keepalived_external_vip_cidr: "172.16.16.10/32"
haproxy_keepalived_internal_vip_cidr: "172.16.16.9/32"
haproxy_keepalived_external_interface: br-mgmt
haproxy_keepalived_internal_interface: br-mgmt

haproxy_stats_enabled: true
haproxy_stats_bind_address: 0.0.0.0
haproxy_stats_port: 1936
haproxy_username: admin
haproxy_stats_refresh_interval: 30
haproxy_client_timeout: "50s"
haproxy_connect_timeout: "30s"
haproxy_http_request_timeout: "20s"
haproxy_server_timeout: "50s"

generate_fsid: false
fsid: f4e63887-732a-4e2d-ac50-bfcb6218a67f

monitor_address_block: "{{ cidr_networks.container }}"
public_network: "{{ cidr_networks.container }}"
cluster_network: "{{ cidr_networks.storage }}"
journal_size: 10240 # size in MB
# ceph-ansible automatically creates pools & keys for OpenStack services
openstack_config: true
cinder_ceph_client: cinder
glance_ceph_client: glance
glance_default_store: rbd
glance_rbd_store_pool: images
nova_libvirt_images_rbd_pool: vms

ceph_origin: repository
ceph_repository: community
ceph_mirror: https://download.ceph.com
ceph_stable_key: https://download.ceph.com/keys/release.asc
ceph_stable_release: 17.2.6
ceph_stable_repo: "{{ ceph_mirror }}/debian-{{ ceph_stable_release }}"

devices:
  - '/dev/sda'
  - '/dev/sdb'
  - '/dev/sdc'  


cinder_backends:
  rbd_volumes:
    volume_driver: cinder.volume.drivers.rbd.RBDDriver
    rbd_pool: volumes
    rbd_ceph_conf: /etc/ceph/ceph.conf
    rbd_store_chunk_size: 8
    volume_backend_name: rbddriver
    rbd_user: "{{ cinder_ceph_client }}"
    rbd_secret_uuid: "{{ cinder_ceph_client_uuid }}"
    report_discard_supported: true